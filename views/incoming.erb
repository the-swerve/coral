<!doctype html>

<html>

<head>
  <title>Coral - Dashboard</title>
	<link rel="stylesheet" media="screen,projection" href="css/bootstrap.css">
	<link rel="stylesheet" media="screen,projection" href="css/bootstrap-responsive.css">
	<link rel="stylesheet" media="screen,projection" href="css/jquery.jqplot.css">
	<link rel="stylesheet" media="screen,projection" href="css/style.css">
	<link rel="stylesheet" media="screen,projection" href="css/dashboard.css">

	<script type="text/javascript" src="js/lib/jquery.js"></script>
	<script type="text/javascript" src="js/lib/jquery.cookie.js"></script>

	<script type="text/javascript" src="js/lib/flot/jquery.flot.js"></script>

	<script type="text/javascript" src="js/lib/underscore.js"></script>
	<script type="text/javascript" src="js/lib/backbone.js"></script>

	<script type="text/javascript" src="https://js.balancedpayments.com/v1/balanced.js"></script>

	<script type="text/javascript" src="js/lib/bootstrap.js"></script>
	<script type="text/javascript" src="js/lib/bootstrap-modal.js"></script>
	<script type="text/javascript" src="js/lib/bootstrap-tooltip.js"></script>


	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript" src="js/incoming.js"></script>
	<script type="text/javascript" src="js/account.js"></script>
	<script type="text/javascript" src="js/plan.js"></script>
	<script type="text/javascript" src="js/payment_method.js"></script>
	<script type="text/javascript" src="js/profile.js"></script>
	<script type="text/javascript" src="js/bank_account.js"></script>
	<script type="text/javascript" src="js/subscription.js"></script>
	<script type="text/javascript" src="js/charge.js"></script>
	<script type="text/javascript" src="js/chart.js"></script>

	<script>


		$(document).ready(function() {

			// Initialize the master view
			var v = new Router({el: $('div.container')});

			// Load in bootstrapped data served by sinatra
			v.account.set(<%= @account.as_hash.to_json %>);
			v.profiles.reset(<%= @account.profiles.map(&:as_hash).to_json %>);
			// Payment methods, subscriptions, and charges are all loaded inside the profiles
		});
	</script>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<!-- the universal ajax loading indicator -->
<div class="progress progress-striped active hide" id='ajax-loader'>
	<div class="bar" style="width: 100%;"></div>
</div>

<%= erb :'meta/test_tag' %>

<div class="container">

	<div id='account'>
		<div class='row'>
			<div class='span9'>
				<h1 id="account-name"><%= @account.name %></h1>
			</div>
			<div class='span3'>
				<%= erb :'meta/nav' %>
			</div>
		</div>
	</div>

	<div class='row'>
		<%= erb :'forms/edit_account' %>
	</div>

	<div class="visualization drop-shadow row">
		<div class='row-fluid'>
			<div class='span6'>
				<h3>Revenue</h2>
				<div id="chart-revenue">Graph goes here!</div>
			</div>
			<div class='span6'>
				<h3>Members</h2>
				<div id="chart-signups">Graph goes here!</div>
			</div>
		</div>
	</div>

	<div class="data drop-shadow row">

		<%= erb :'forms/edit_profile' %>

		<div class='row data-row'>
			<%= erb :'tables/profiles' %>
			<div class='span12'>
				<div id='profiles-container' class='hide'>
				</div>
			</div>
		</div>

	</div>

		<div id='charge' class='hide'>
			<h3>Payments</h3>
			<div id="charge-table"></div>
		</div>
	</div>


</div>

	<div id='footer'>
		<!-- <a class="logo" href="/">coral</a> -->

		<i class='fish fish1'></i>
		<i class='fish fish-school'></i>
		<i class='fish fish-skinny'></i>
		<i class='fish fish-floppy'></i>
	</div>

</body>
</html>
